- content_for :head do
  = javascript_include_tag :music

= stylesheet_link_tag :music

- if @release.all?{|track| track["format_name"] == "FLAC" }
  = javascript_include_tag :aurora
  = javascript_include_tag :flac

.row
  %ul
    %li
      = link_to search_music_index_path(params.slice("q", "rows")), { "data-transition" => "none" } do
        %i.fa.fa-list.fa-4

- if @images.any?
  .row.images.margin-20
    .polaroid-images
      - @images.each do |image|
        = link_to image.file.url, class: "swipebox" do
          = image_tag image.file.thumb("300x250>").url

- if @nfo.any?
  .row
    %ul
      - @nfo.each do |nfo|
        %li
          = link_to nfo.file.url, target: "_blank" do
            %i.fa.fa-sticky-note.fa-4.shadow-light.margin-10

- @release.each do |track|
  .row
    %ul
      - track.slice("artist", "title", "album", "genre", "year").each do |k, v|
        %li
          .col-md-2
            %strong
            - if ["artist", "year"].include?(k)
              = link_to highlight(v, params[:q]), search_music_index_path(params.slice("rows").merge("q" => v)), { "data-transition" => "none" }
            - else
              = highlight(v, params[:q])

      %li
        .col-md-2
          %i.fa.fa-play-circle.fa-4.play-btn{ "data-uri" => asset_path(track[:path]) }

:javascript
  observePlayers();
  $('.swipebox').swipebox();
  $.each($('.polaroid-images a'), function(i, element) {
    var i = parseInt(Math.random() * 10);
    var m = Math.random() < 0.5 ? -1 : 1;
    $(element).css('transform', 'rotate(' + i * m + 'deg)');
  });
