- content_for :head do
  = javascript_include_tag :music
  = stylesheet_link_tag :music

%div{ "data-role": "page", "id": "release-#{@release.id}" }
  .back
    .row
      %ul
        %li
          = link_to music_index_path(authorized_search_params), default_transition do
            %i.fas.fa-4.fa-list

  .images
    :scss
      #{render partial: "music/images.css"}

    - if @release.images.any?
      .row
        .polaroid-images
          - @release.images.each do |image|
            = link_to image.file.url, class: :swipebox do
              %div{ id: "img-#{image.id}" }

    :javascript
      $(document).ready(function(e) {
        observe_polaroids();
        $(".swipebox").swipebox();
      });

    - if @release.nfo_files.any?
      .row
        %ul
          - @release.nfo_files.each do |nfo|
            %li
              = link_to nfo.file.url, target: "_blank" do
                %i.fas.fa-4.fa-sticky-note

  .tracks
    - @tracks.each do |track|
      .row{ class: cycle('odd', 'even') }
        %ul
          %li
            .col-md-2
              = link_to highlight(track.artist, search_terms_array),
                  music_index_path(q: track.artist), default_transition
            .col-md-2
              = highlight track.title, search_terms_array
            .col-md-2
              = highlight track.album, search_terms_array
            .col-md-1
              = highlight track.genre, search_terms_array
            .col-md-1
              = link_to highlight(track.year, search_terms_array),
                  music_index_path(q: track.year), default_transition
            .col-md-1
              .badge.duration= track.duration
            .col-md-1
              = fa_processing_btn
              = fa_play_btn({ id: track.id })

  :javascript
    new App.Tracks(#{@release.track_urls.to_json.html_safe})
