:javascript

    (function($) {
        $(function() {
            function set_progress(value) {
                $('#progress-bar').attr('aria-valuenow', value);
                $('#progress-bar').css('width', value + '%');
            }

            function display_file(item) {
                $('body').append($('<hr />'));
                $('body').append(item.response.created_at);
                $('body').append(
                    $('<a />')
                        .attr('target', 'blank')
                        .attr('href', item.response.media)
                        .html(item.response.file_name)
                );
            }

            $(document).ready(function() {
                $("#Filedata").change(function(e) {
                    send_file({
                        input_id: "Filedata",
                        name: "upload",
                        url: "http://#{HOST_NAME}/uploads",
                        type: "POST",
                        progress: function(item) {
                            set_progress(parseInt(item.counter / item.total_files * 100))
                            display_file(item);
                        }
                    });
                });
            })

        });
    })(jQuery);
